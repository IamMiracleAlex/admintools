(this["webpackJsonphierarchy-frontend"]=this["webpackJsonphierarchy-frontend"]||[]).push([[0],{155:function(e,t,a){},158:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(19),r=a.n(n),s=a(28),i=a(35),o=a(14),l=a(10),d=a.n(l),u=a(18),j=a(105),h=a(112),b=a(111),f=a(106),p=a.n(f).a.create({baseURL:"".concat(localStorage.getItem("BASE_URL"))});p.interceptors.request.use((function(e){return e.headers={Authorization:"Token ".concat(sessionStorage.getItem("hierarchy_session"))},e}));var O,v,x=p,m=a(52),g=a.n(m),y=a(173),w=a(109),C=a(175),N=a(21),S=a(172),k=a(110);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function _(e,t){var a=e.title,n=e.titleId,r=E(e,["title","titleId"]);return c.createElement("svg",F({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,O||(O=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.16663 3.33335C5.94496 3.33335 3.33329 5.94503 3.33329 9.16669C3.33329 12.3883 5.94496 15 9.16663 15C12.3883 15 15 12.3883 15 9.16669C15 5.94503 12.3883 3.33335 9.16663 3.33335ZM1.66663 9.16669C1.66663 5.02455 5.02449 1.66669 9.16663 1.66669C13.3088 1.66669 16.6666 5.02455 16.6666 9.16669C16.6666 13.3088 13.3088 16.6667 9.16663 16.6667C5.02449 16.6667 1.66663 13.3088 1.66663 9.16669Z",fill:"#0086C6",fillOpacity:.8})),v||(v=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2857 13.2858C13.6111 12.9603 14.1388 12.9603 14.4642 13.2858L18.0892 16.9108C18.4147 17.2362 18.4147 17.7638 18.0892 18.0893C17.7638 18.4147 17.2361 18.4147 16.9107 18.0893L13.2857 14.4643C12.9603 14.1388 12.9603 13.6112 13.2857 13.2858Z",fill:"#0086C6",fillOpacity:.8})))}var D,A=c.forwardRef(_);a.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function T(e,t){var a=e.title,n=e.titleId,r=L(e,["title","titleId"]);return c.createElement("svg",M({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,D||(D=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0892 4.41076C13.4147 4.7362 13.4147 5.26384 13.0892 5.58928L8.67847 10L13.0892 14.4108C13.4147 14.7362 13.4147 15.2638 13.0892 15.5893C12.7638 15.9147 12.2361 15.9147 11.9107 15.5893L6.9107 10.5893C6.58527 10.2638 6.58527 9.7362 6.9107 9.41077L11.9107 4.41076C12.2361 4.08533 12.7638 4.08533 13.0892 4.41076Z",fill:"#0086C6"})))}var I,B=c.forwardRef(T);a.p;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var a,c,n=function(e,t){if(null==e)return{};var a,c,n={},r=Object.keys(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)a=r[c],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function R(e,t){var a=e.title,n=e.titleId,r=U(e,["title","titleId"]);return c.createElement("svg",P({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,I||(I=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.9107 4.41076C7.23614 4.08533 7.76378 4.08533 8.08922 4.41076L13.0892 9.41077C13.4147 9.7362 13.4147 10.2638 13.0892 10.5893L8.08922 15.5893C7.76378 15.9147 7.23614 15.9147 6.9107 15.5893C6.58527 15.2638 6.58527 14.7362 6.9107 14.4108L11.3214 10L6.9107 5.58928C6.58527 5.26384 6.58527 4.7362 6.9107 4.41076Z",fill:"#0086C6"})))}var V=c.forwardRef(R),G=(a.p,a(8)),H=a(176),z=function(e){var t,a=e.response;return(null===a||void 0===a?void 0:a.data.detail)?a.data.detail:(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.non_field_errors)?a.data.non_field_errors:(null===a||void 0===a?void 0:a.statusText)?"".concat(null===a||void 0===a?void 0:a.status,": ").concat(a.statusText):(null===e||void 0===e?void 0:e.message)?e.message:"".concat(null===a||void 0===a?void 0:a.status,": Something went wrong, Try Again!")},W=function(e){var t=[];return e.forEach((function(e){t.push({id:e.id,checked:!0}),e.children.forEach((function(e){t.push({id:e.id,checked:!0}),e.children.forEach((function(e){t.push({id:e.id,checked:!0}),e.children.forEach((function(e){t.push({id:e.id,checked:!0})}))}))}))})),t},K=function(e){var t=[];return e.forEach((function(e){t.push({id:e.id,checked:!0})})),t},J=function(){return"True"===sessionStorage.getItem("has_write_access")},Y=function(e,t,a){e&&t.unshift(e);var c=function(e){for(var t="object"!=typeof e?JSON.parse(e):e,a="",c=0;c<t.length;c++){var n="";for(var r in t[c])""!==n&&(n+=","),n+=t[c][r];a+=n+"\r\n"}return a}(JSON.stringify(t)),n=a+".csv",r=new Blob([c],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,n);else{var s=document.createElement("a");if(void 0!==s.download){var i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download",n),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}},Z=(a(155),a(1)),q=function(e){var t=e.show,a=e.hide,c=e.message;return t?Object(Z.jsxs)("div",{className:"error-wrapper border border-danger mb-4",children:[Object(Z.jsx)("span",{className:"error__message",children:c}),Object(Z.jsx)("button",{type:"button",className:"error__close-icon",onClick:a,children:Object(Z.jsx)("span",{children:"\xd7"})})]}):null},Q=(a(157),a(158),function(e){var t=e.message;return Object(Z.jsx)("div",{className:"custom-notification-text-container custom-notification-success",children:Object(Z.jsxs)("p",{children:[t," ",Object(Z.jsx)("span",{children:"x"})]})})}),X=function(e){return m.store.addNotification({container:"top-left",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],type:"success",dismiss:{duration:1e4},content:Object(Z.jsx)(Q,{message:e})})},$=a(171),ee=function(e){return"lg"===e.size?Object(Z.jsx)($.a,{animation:"border",size:"lg",role:"status",variant:"dark",className:"custom-spinner-lg"}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)($.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),Object(Z.jsx)("span",{children:"Please Wait..."})]})},te=function(e){var t=e.selectedNodes,a=e.updateState,n=Object(c.useState)(!1),r=Object(G.a)(n,2),i=r[0],l=r[1],j=Object(c.useState)(!1),h=Object(G.a)(j,2),b=h[0],f=h[1],p=Object(c.useState)(!1),O=Object(G.a)(p,2),v=O[0],m=O[1],g=Object(c.useState)(!1),N=Object(G.a)(g,2),k=N[0],F=N[1],E=Object(c.useState)(!1),_=Object(G.a)(E,2),D=_[0],A=_[1],M=Object(c.useState)(null),L=Object(G.a)(M,2),T=L[0],I=L[1],B=Object(c.useState)([]),P=Object(G.a)(B,2),U=P[0],R=P[1],V=Object(c.useState)([]),W=Object(G.a)(V,2),K=W[0],J=W[1],Y=Object(c.useState)([]),Q=Object(G.a)(Y,2),$=Q[0],te=Q[1],ae=Object(c.useState)(t.map((function(e){return e.id}))),ce=Object(G.a)(ae,2),ne=ce[0],re=ce[1],se=function(){l(!1),F(!1),te([]),re([]),J([]),I(null),a({selectedNodes:[],selectAll:!1})};Object(c.useEffect)((function(){if(i){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,x.get("/classification/facet_category/");case 4:t=e.sent,a=t.data,R(a),m(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),F(!0),A(z(e.t0)),m(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet/");case 3:t=e.sent,a=t.data,J(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),F(!0),A(z(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e(),t()}}),[i]),Object(c.useEffect)((function(){re(t.map((function(e){return e.id})))}),[t]);var ie=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,x.post("classification/nodes/bulk_assign_facets/",{nodes:ne,facets:$});case 4:200===e.sent.status&&(X("".concat(t.length," nodes successfully assigned")),l(!1),f(!1),te([]),re([]),se()),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),f(!1),F(!0),A(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(S.a,{className:"custom-btn-primary mr-2",variant:"primary",onClick:function(){return l(!0)},disabled:t<1,children:"Bulk Assign"}),i&&Object(Z.jsxs)(C.a,{show:i,onHide:se,className:"bulk-assign-modal",backdrop:"static",children:[Object(Z.jsx)(C.a.Header,{closeButton:!0,children:Object(Z.jsx)(C.a.Title,{children:"Bulk Assign"})}),Object(Z.jsxs)("div",{className:"px-3",children:[Object(Z.jsx)(q,{show:k,message:D,hide:function(){return F(!1)}}),Object(Z.jsxs)("h4",{className:"pt-3 font-bold",children:[ne.length," nodes selected"]}),Object(Z.jsxs)(y.a,{children:[Object(Z.jsx)(w.a,{lg:6,md:6,children:Object(Z.jsx)("div",{className:"facet-btn-container facet-category bulk-assign-facet",children:v?Object(Z.jsx)(ee,{size:"lg"}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)("h4",{className:"pb-3",children:"The Facet Category"}),U.map((function(e){var t=e.id,a=e.title,c=t===T?"highlighted":"";return Object(Z.jsx)(S.a,{className:"facet-btn ".concat(c),variant:"outline-primary",onClick:function(){return I(t)},block:!0,children:a},t)}))]})})}),Object(Z.jsx)(w.a,{lg:6,md:6,children:T&&Object(Z.jsxs)("div",{className:"facet-btn-container facet-category bulk-assign-facet",children:[Object(Z.jsx)("div",{className:"mt-3",children:Object(Z.jsxs)("div",{className:"node-editor-search ml-0 w-100 ",children:[Object(Z.jsx)("p",{style:{fontSize:16},children:"Edit All"}),Object(Z.jsx)(H.a.Group,{className:"facet-value-row",children:Object(Z.jsxs)(H.a.Control,{as:"select",onChange:function(e){var t=K.filter((function(e){return e.category===T})).map((function(t){return{facet:t.id,has_facet:e.target.value}}));te(t)},custom:!0,children:[Object(Z.jsx)("option",{value:"",children:"Select"}),Object(Z.jsx)("option",{value:"always",children:"Always"}),Object(Z.jsx)("option",{value:"sometimes",children:"Sometimes"}),Object(Z.jsx)("option",{value:"never",children:"Never"})]})})]})}),K.filter((function(e){return e.category===T})).map((function(e){var t,a=e.id,c=e.label;return Object(Z.jsxs)(H.a.Group,{className:"facet-value-row",children:[Object(Z.jsx)(H.a.Label,{children:c}),Object(Z.jsxs)(H.a.Control,{as:"select",className:"facet-value-select",onChange:function(e){return function(e,t){var a=$.findIndex((function(e){return e.facet===t}));if(a<0)te([].concat(Object(s.a)($),[{facet:t,has_facet:e.target.value}]));else{var c=Object(s.a)($);c[a]=Object(o.a)(Object(o.a)({},c[a]),{},{has_facet:e.target.value}),te(Object(s.a)(c))}}(e,a)},value:(null===$||void 0===$||null===(t=$.find((function(e){return e.facet===a})))||void 0===t?void 0:t.has_facet)||"",custom:!0,children:[Object(Z.jsx)("option",{value:"",disabled:!0,children:"Select"}),Object(Z.jsx)("option",{value:"always",children:"Always"}),Object(Z.jsx)("option",{value:"sometimes",children:"Sometimes"}),Object(Z.jsx)("option",{value:"never",children:"Never"})]})]},a)}))]})})]}),Object(Z.jsxs)("div",{className:"add-facet-modal-footer pb-4",children:[Object(Z.jsx)(S.a,{className:"centricity-btn mr-2",variant:"outline-primary",onClick:se,disabled:b,children:"Cancel"}),Object(Z.jsx)(S.a,{className:" centricity-btn",variant:"primary",disabled:b,type:"button",onClick:ie,children:b?Object(Z.jsx)(ee,{}):"Save"})]})]})]})]})},ae=function(e){var t=e.treeData,a=e.updateState,c=e.searchFoundCount,n=e.searchFocusIndex,r=e.isFetchingHierarchy,s=e.selectedNodes,i=function(e){a({treeData:Object(N.f)({treeData:t,expanded:e})})};return Object(Z.jsxs)("div",{className:"hierarchy-filters-container",children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)(S.a,{className:"custom-btn-outline-primary mr-2",variant:"outline-primary",onClick:function(){return i(!0)},children:"Expand all"}),Object(Z.jsx)(S.a,{className:"custom-btn-outline-primary mr-2",variant:"outline-primary",onClick:function(){return i(!1)},children:"Collapse all"}),Object(Z.jsx)(S.a,{className:"custom-btn-primary mr-2",variant:"primary",onClick:function(){return a({showModal:!0,showAddFacetCategory:!0})},disabled:!J(),children:"Add Facet Category"}),Object(Z.jsx)(S.a,{className:"custom-btn-primary mr-2",variant:"primary",onClick:function(){return a({showModal:!0,showAddFacetValue:!0})},disabled:!J(),children:"Add Facet Value"}),Object(Z.jsx)(te,{selectedNodes:s,updateState:a}),!r&&Object(Z.jsx)(S.a,{className:"custom-btn-primary mr-2",variant:"primary",onClick:function(){return a({showModal:!0,showExport:!0})},children:"Export"})]}),Object(Z.jsxs)("div",{className:"d-flex",children:[Object(Z.jsxs)("div",{className:"custom-search-container",children:[Object(Z.jsx)(k.a,{className:"custom-search-field",placeholder:"Search",onChange:function(e){a({searchString:e.target.value.toUpperCase().trim()})}}),Object(Z.jsx)(A,{})]}),Object(Z.jsx)(S.a,{className:"ml-2",variant:"Link",onClick:function(){a({searchFocusIndex:null!==n?(c+n-1)%c:c-1})},disabled:!c,children:Object(Z.jsx)(B,{})}),Object(Z.jsx)(S.a,{variant:"Link",onClick:function(){a({searchFocusIndex:null!==n?(n+1)%c:0})},disabled:!c,children:Object(Z.jsx)(V,{})}),Object(Z.jsxs)("p",{className:"search-count",children:[c>0?n+1:0," / ",c]})]})]})},ce=function(e){var t=e.categoryId,a=Object(c.useState)(!1),n=Object(G.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(""),l=Object(G.a)(i,2),j=l[0],h=l[1],b=Object(c.useState)(!1),f=Object(G.a)(b,2),p=f[0],O=f[1],v=Object(c.useState)(!1),m=Object(G.a)(v,2),g=m[0],y=m[1],w=Object(c.useState)({}),C=Object(G.a)(w,2),N=C[0],k=C[1],F=function(){var e=Object(u.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet_category/".concat(t,"/"));case 3:a=e.sent,c=a.data,console.log("data ",c),h(null===c||void 0===c?void 0:c.facet_type),k({title:null===c||void 0===c?void 0:c.title,description:null===c||void 0===c?void 0:c.description}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),O(!0),y(z(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){t&&F(t)}),[t]);var E=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,x.patch("/classification/facet_category/".concat(t,"/"),Object(o.a)(Object(o.a)({},N),{},{facet_type:j}));case 4:200===e.sent.status&&(s(!1),X("Facet Category Type Successfully Updted")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),s(!1),O(!0),y(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)("div",{className:"mb-5",children:[Object(Z.jsx)(q,{show:p,message:g,hide:function(){return O(!1)}}),Object(Z.jsx)("h4",{className:"mb-3",children:"Facet Category Type"}),Object(Z.jsx)(H.a.Group,{className:"facet-value-row",children:Object(Z.jsxs)(H.a.Control,{as:"select",onChange:function(e){h(e.target.value)},value:j,custom:!0,children:[Object(Z.jsx)("option",{value:"",disabled:!0,children:"Select"}),Object(Z.jsx)("option",{value:"single",children:"Single Select"}),Object(Z.jsx)("option",{value:"multi",children:"Multi Select"}),Object(Z.jsx)("option",{value:"boolean",children:"Boolean"})]})}),Object(Z.jsx)(S.a,{type:"submit",className:"centricity-btn",variant:"primary",block:!0,onClick:function(){return E(t)},children:r?Object(Z.jsx)(ee,{}):"Save"})]})},ne={title:"",description:"",facet_properties:[]},re=function(e){var t=e.onClickNode,a=e.treeData,n=e.updateParentState,r=e.refreshFacetCategory,l=e.refreshFacetValue,j=e.fetchingFacets,h=Object(c.useState)([]),b=Object(G.a)(h,2),f=b[0],p=b[1],O=Object(c.useState)([]),v=Object(G.a)(O,2),m=v[0],g=v[1],C=Object(c.useState)([]),k=Object(G.a)(C,2),F=k[0],E=k[1],_=Object(c.useState)([]),D=Object(G.a)(_,2),M=D[0],L=D[1],T=Object(c.useState)(null),I=Object(G.a)(T,2),B=I[0],P=I[1],U=Object(c.useState)(!1),R=Object(G.a)(U,2),V=R[0],W=R[1],K=Object(c.useState)(!1),Y=Object(G.a)(K,2),Q=Y[0],$=Y[1],te=Object(c.useState)(!1),ae=Object(G.a)(te,2),re=ae[0],se=ae[1],ie=Object(c.useState)(!1),oe=Object(G.a)(ie,2),le=oe[0],de=oe[1],ue=Object(c.useState)(ne),je=Object(G.a)(ue,2),he=je[0],be=je[1],fe=Object(c.useState)([]),pe=Object(G.a)(fe,2),Oe=pe[0],ve=pe[1],xe=Object(c.useState)("all"),me=Object(G.a)(xe,2),ge=me[0],ye=me[1],we=he.title,Ce=he.description,Ne=he.facet_properties,Se=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet_category/");case 3:t=e.sent,a=t.data,p(a),g(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),se(!0),de(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet/");case 3:t=e.sent,a=t.data,E(a),L(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),se(!0),de(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Se(),ke()}),[r,l]),Object(c.useEffect)((function(){if(t){var e,a=t.parentNode,c=t.node,n={title:c.title,description:c.description,facet_properties:null===(e=c.facet_properties)||void 0===e?void 0:e.map((function(e){return{has_facet:e.has_facet,facet:e.id}})),parent:a?a.id:null};be(n),P(null)}}),[t]),Object(c.useEffect)((function(){return $(j)}),[j]);var Fe=function(e){W(!1);var c=null===Ne||void 0===Ne?void 0:Ne.map((function(e){return{id:e.facet,has_facet:e.has_facet}}));n({treeData:Object(N.b)({treeData:a,path:t.path,getNodeKey:N.d,newNode:Object(o.a)(Object(o.a)(Object(o.a)({},t.node),e),{},{facet_properties:c})}),nodeClicked:null}),be(ne),ve([]),P(null)},Ee=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,W(!0),e.next=4,x.post("classification/nodes/",Object(o.a)({title:we.replace(/ +(?= )/g,""),description:Ce,facet_properties:Oe},he.hasOwnProperty("parent")&&{parent:he.parent}));case 4:201===(t=e.sent).status&&(X("Node Successfully Created"),Fe(t.data)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),W(!1),se(!0),de(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(u.a)(d.a.mark((function e(){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.node,e.prev=1,W(!0),e.next=5,x.patch("classification/nodes/".concat(a.id,"/"),{title:we.replace(/ +(?= )/g,""),description:Ce,facet_properties:Oe});case 5:200===(c=e.sent).status&&(X("Node Successfully Updated"),Fe(c.data)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),W(!1),se(!0),de(z(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),De=""===we&&""===Ce&&Ne<1,Ae=function(e){var t=e.target,a=t.name,c=t.value;c="title"===a?c.toUpperCase():c,be(Object(o.a)(Object(o.a)({},he),{},Object(i.a)({},a,c)))};return Object(Z.jsxs)(y.a,{children:[Object(Z.jsx)(w.a,{lg:6,md:12,children:Object(Z.jsxs)("div",{className:"column-container node-editor",children:[Object(Z.jsx)(q,{show:re,message:le,hide:function(){return se(!1)}}),Object(Z.jsx)("h4",{children:"Node Editor"}),Object(Z.jsxs)(H.a,{onSubmit:function(e){e.preventDefault(),t.node.id?_e():Ee()},className:"centricity-form",children:[Object(Z.jsxs)(H.a.Group,{children:[Object(Z.jsx)(H.a.Label,{children:"Title:"}),Object(Z.jsx)(H.a.Control,{type:"text",name:"title",value:we,disabled:!t,onChange:Ae,required:!0})]}),Object(Z.jsxs)(H.a.Group,{children:[Object(Z.jsx)(H.a.Label,{children:"Description:"}),Object(Z.jsx)(H.a.Control,{as:"textarea",rows:"3",name:"description",value:Ce,disabled:!t,onChange:Ae})]}),Object(Z.jsx)("h4",{className:"pt-2",children:"The Facet Category"}),Object(Z.jsxs)("div",{className:"mt-3",children:[Object(Z.jsx)("p",{style:{fontSize:14},children:"Category Type"}),Object(Z.jsxs)("div",{className:"d-flex",children:[Object(Z.jsx)(H.a.Group,{className:"facet-category-filter",children:Object(Z.jsxs)(H.a.Control,{as:"select",onChange:function(e){if(ye(e.target.value),"all"===e.target.value)return g(f);g(f.filter((function(t){return t.facet_type===e.target.value})))},value:ge,custom:!0,children:[Object(Z.jsx)("option",{value:"",disabled:!0,children:"Select"}),Object(Z.jsx)("option",{value:"all",children:"All"}),Object(Z.jsx)("option",{value:"single",children:"Single Select"}),Object(Z.jsx)("option",{value:"multi",children:"Multi Select"}),Object(Z.jsx)("option",{value:"boolean",children:"Boolean"})]})}),Object(Z.jsxs)("div",{className:"node-editor-search",children:[Object(Z.jsx)(H.a.Control,{className:"custom-search",placeholder:"Search",onChange:function(e){var t=e.target.value;g(f.filter((function(e){return-1!==e.title.toLowerCase().indexOf(t.toLowerCase().trim())})))}}),Object(Z.jsx)(A,{})]})]})]}),Object(Z.jsx)("div",{className:"facet-btn-container facet-category",children:Q?Object(Z.jsx)(ee,{size:"lg"}):m&&m.length>0?null===m||void 0===m?void 0:m.map((function(e){var a=e.id,c=e.title,n=a===B?"highlighted":"";return Object(Z.jsx)(S.a,{className:"facet-btn ".concat(n),variant:"outline-primary",onClick:function(){P(a),L(F)},disabled:!t,block:!0,children:c},a)})):"No facet category found"}),Object(Z.jsx)(S.a,{type:"submit",className:"centricity-btn",variant:"primary",disabled:V||De||!J(),block:!0,children:V?Object(Z.jsx)(ee,{}):"Save"})]})]})}),B&&Object(Z.jsx)(w.a,{lg:6,md:12,children:Object(Z.jsxs)("div",{className:"column-container node-editor facet-value-wrapper",children:[Object(Z.jsx)(ce,{categoryId:B}),Object(Z.jsx)("h4",{children:"Facet Value"}),Object(Z.jsx)("div",{className:"mt-3",children:Object(Z.jsxs)("div",{className:"node-editor-search ml-0 w-100 ",children:[Object(Z.jsx)(H.a.Control,{className:"custom-search",placeholder:"Search",onChange:function(e){var t=e.target.value;L(F.filter((function(e){return-1!==e.label.toLowerCase().indexOf(t.toLowerCase().trim())})))}}),Object(Z.jsx)(A,{})]})}),Object(Z.jsx)("div",{className:"mt-3",children:Object(Z.jsxs)("div",{className:"node-editor-search ml-0 w-100 ",children:[Object(Z.jsx)("p",{style:{fontSize:14},children:"Edit All"}),Object(Z.jsx)(H.a.Group,{className:"facet-value-row",children:Object(Z.jsxs)(H.a.Control,{as:"select",onChange:function(e){var t=M.filter((function(e){return e.category===B})),a=t.map((function(t){return{facet:t.id,has_facet:e.target.value}})),c=he.facet_properties.map((function(a){return{facet:a.facet,has_facet:t.find((function(e){return e.id===a.facet}))?e.target.value:a.has_facet}}));ve(a),be(Object(o.a)(Object(o.a)({},he),{},{facet_properties:c}))},custom:!0,children:[Object(Z.jsx)("option",{value:"",children:"Select"}),Object(Z.jsx)("option",{value:"always",children:"Always"}),Object(Z.jsx)("option",{value:"sometimes",children:"Sometimes"}),Object(Z.jsx)("option",{value:"never",children:"Never"})]})})]})}),Object(Z.jsx)("div",{className:"facet-btn-container",children:function(){var e;return null===(e=M.filter((function(e){return e.category===B})))||void 0===e?void 0:e.map((function(e){var t,a=e.id,c=e.label;return Object(Z.jsxs)(H.a.Group,{className:"facet-value-row",children:[Object(Z.jsx)(H.a.Label,{children:c}),Object(Z.jsxs)(H.a.Control,{as:"select",className:"facet-value-select",onChange:function(e){return function(e,t){var a=Ne.findIndex((function(e){return e.facet===t})),c=Oe.findIndex((function(e){return e.facet===t}));if(a<0)be(Object(o.a)(Object(o.a)({},he),{},{facet_properties:[].concat(Object(s.a)(Ne),[{facet:t,has_facet:e.target.value}])}));else{var n=Object(s.a)(Ne);n[a]=Object(o.a)(Object(o.a)({},n[a]),{},{has_facet:e.target.value}),be(Object(o.a)(Object(o.a)({},he),{},{facet_properties:Object(s.a)(n)}))}if(c<0)ve([].concat(Object(s.a)(Oe),[{facet:t,has_facet:e.target.value}]));else{var r=Object(s.a)(Oe);r[c]=Object(o.a)(Object(o.a)({},r[c]),{},{has_facet:e.target.value}),ve(Object(s.a)(r))}}(e,a)},value:(null===Ne||void 0===Ne||null===(t=Ne.find((function(e){return e.facet===a})))||void 0===t?void 0:t.has_facet)||"",custom:!0,children:[Object(Z.jsx)("option",{value:"",disabled:!0,children:"Select"}),Object(Z.jsx)("option",{value:"always",children:"Always"}),Object(Z.jsx)("option",{value:"sometimes",children:"Sometimes"}),Object(Z.jsx)("option",{value:"never",children:"Never"})]})]},a)}))}()})]})})]})},se=function(e){var t=e.node,a=e.treeData,n=e.updateParentState,r=Object(c.useState)(!1),s=Object(G.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(!1),j=Object(G.a)(l,2),h=j[0],b=j[1],f=Object(c.useState)(!1),p=Object(G.a)(f,2),O=p[0],v=p[1],m=function(){var e=Object(u.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),e.next=4,x.delete("classification/nodes/".concat(c,"/"));case 4:204===e.sent.status&&(n({showModal:!1,showDelete:!1,treeData:Object(N.e)({treeData:a,path:t.path,getNodeKey:N.d}),node:{}}),o(!1),X("Node Successfully Deleted")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),o(!1),b(!0),v(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(C.a.Header,{closeButton:!0,children:Object(Z.jsx)(C.a.Title,{children:"Delete Node"})}),Object(Z.jsxs)(C.a.Body,{children:[Object(Z.jsx)(q,{show:h,message:O,hide:function(){return b(!1)}}),Object(Z.jsx)("p",{children:"This node might have children. Are you sure you want to delete?"})]}),Object(Z.jsxs)(C.a.Footer,{children:[Object(Z.jsx)(S.a,{className:"centricity-btn",variant:"outline-primary",onClick:function(){return n({showModal:!1,showDelete:!1})},children:"Cancel"}),Object(Z.jsx)(S.a,{className:" centricity-btn",variant:"primary",disabled:i,onClick:function(){return m(t.node.id)},children:i?Object(Z.jsx)(ee,{}):"Delete"})]})]})},ie={title:"",description:"",facets:[]},oe=function(e){e.showAddFacetCategory;var t=e.updateParentState,a=Object(c.useState)(ie),n=Object(G.a)(a,2),r=n[0],s=n[1],l=Object(c.useState)(!1),j=Object(G.a)(l,2),h=j[0],b=j[1],f=Object(c.useState)(!1),p=Object(G.a)(f,2),O=p[0],v=p[1],m=Object(c.useState)(!1),g=Object(G.a)(m,2),y=g[0],w=g[1],N=function(e){var t=e.target,a=t.name,c=t.value;c="title"===a?c.replace(/ +(?= )/g,"").toUpperCase():c.replace(/ +(?= )/g,""),s(Object(o.a)(Object(o.a)({},r),{},Object(i.a)({},a,c)))},k=function(){var e=Object(u.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,x.post("classification/facet_category/",r);case 4:201===(a=e.sent).status&&(X("Facet Successfully Created"),t({showModal:!1,showAddFacetCategory:!1,refreshFacetCategory:a.data})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),b(!1),v(!0),w(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(C.a.Header,{closeButton:!0,children:Object(Z.jsx)(C.a.Title,{children:"Facet Category"})}),Object(Z.jsxs)(C.a.Body,{children:[Object(Z.jsx)(q,{show:O,message:y,hide:function(){return v(!1)}}),Object(Z.jsxs)(H.a,{onSubmit:function(e){e.preventDefault(),k()},className:"centricity-form pt-0",children:[Object(Z.jsxs)(H.a.Group,{children:[Object(Z.jsx)(H.a.Label,{children:"Title"}),Object(Z.jsx)(H.a.Control,{type:"text",name:"title",value:r.title,onChange:N,required:!0})]}),Object(Z.jsxs)(H.a.Group,{className:"mt-3",children:[Object(Z.jsx)(H.a.Label,{children:"Description"}),Object(Z.jsx)(H.a.Control,{as:"textarea",rows:"3",name:"description",value:r.description,onChange:N})]}),Object(Z.jsxs)("div",{className:"add-facet-modal-footer",children:[Object(Z.jsx)(S.a,{className:"centricity-btn mr-2",variant:"outline-primary",onClick:function(){return t({showModal:!1,showAddFacetCategory:!1})},children:"Cancel"}),Object(Z.jsx)(S.a,{className:" centricity-btn",variant:"primary",disabled:h,type:"submit",children:h?Object(Z.jsx)(ee,{}):"Save"})]})]})]})]})},le=a(64),de={label:"",description:"",category:null},ue=function(e){var t=e.updateParentState,a=Object(c.useState)(de),n=Object(G.a)(a,2),r=n[0],s=n[1],l=Object(c.useState)(!1),j=Object(G.a)(l,2),h=j[0],b=j[1],f=Object(c.useState)(!1),p=Object(G.a)(f,2),O=p[0],v=p[1],m=Object(c.useState)(!1),g=Object(G.a)(m,2),y=g[0],w=g[1],N=Object(c.useState)(),k=Object(G.a)(N,2),F=k[0],E=k[1];Object(c.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet_category/");case 3:200===(t=e.sent).status&&(a=t.data.map((function(e){return{value:e.id,label:e.title}})),E(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var _=function(e){var t=e.target,a=t.name,c=t.value;c="label"===a?c.toUpperCase():c,s(Object(o.a)(Object(o.a)({},r),{},Object(i.a)({},a,c)))},D=function(){var e=Object(u.a)(d.a.mark((function e(a){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,x.post("classification/facet/",a);case 4:201===(c=e.sent).status&&(X("Facet Value Successfully Created"),t({showModal:!1,showAddFacetValue:!1,refreshFacetValue:c.data})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),b(!1),v(!0),w(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(C.a.Header,{closeButton:!0,children:Object(Z.jsx)(C.a.Title,{children:"Facet Value"})}),Object(Z.jsxs)(C.a.Body,{children:[Object(Z.jsx)(q,{show:O,message:y,hide:function(){return v(!1)}}),Object(Z.jsxs)(H.a,{className:"centricity-form pt-0",onSubmit:function(e){e.preventDefault();var t=r.category,a=r.label,c=r.description,n={category:null===t||void 0===t?void 0:t.value,label:a.replace(/ +(?= )/g,""),description:c};D(n)},children:[Object(Z.jsxs)(H.a.Group,{children:[Object(Z.jsx)(H.a.Label,{children:"Category"}),Object(Z.jsx)(le.a,{value:r.category,options:F,onChange:function(e){s(Object(o.a)(Object(o.a)({},r),{},{category:e}))},isLoading:!F,className:"custom-select-container",classNamePrefix:"custom-react-select"})]}),Object(Z.jsxs)(H.a.Group,{className:"mt-3",children:[Object(Z.jsx)(H.a.Label,{children:"Label"}),Object(Z.jsx)(H.a.Control,{type:"text",name:"label",value:r.label,onChange:_,required:!0})]}),Object(Z.jsxs)(H.a.Group,{className:"mt-3",children:[Object(Z.jsx)(H.a.Label,{children:"Description"}),Object(Z.jsx)(H.a.Control,{as:"textarea",rows:"3",name:"description",value:r.description,onChange:_})]}),Object(Z.jsxs)("div",{className:"add-facet-modal-footer",children:[Object(Z.jsx)(S.a,{className:"centricity-btn mr-2",variant:"outline-primary",onClick:function(){return t({showModal:!1,showAddFacetValue:!1})},children:"Cancel"}),Object(Z.jsx)(S.a,{className:" centricity-btn",variant:"primary",disabled:h||!r.category,type:"submit",children:h?Object(Z.jsx)(ee,{}):"Save"})]})]})]})]})},je=a(177),he=a(174),be=function(e){var t=e.treeData,a=e.updateParentState,n=e.selectedNodes,r=Object(c.useState)(""),s=Object(G.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)("hierarchyExport"),j=Object(G.a)(l,2),h=j[0],b=j[1],f=Object(c.useState)(),p=Object(G.a)(f,2),O=p[0],v=p[1],m=Object(c.useState)([]),g=Object(G.a)(m,2),y=g[0],w=g[1],N=Object(c.useState)([]),k=Object(G.a)(N,2),F=k[0],E=k[1],_=Object(c.useState)(""),D=Object(G.a)(_,2),A=D[0],M=D[1],L=Object(c.useState)(!1),T=Object(G.a)(L,2),I=T[0],B=T[1],P=Object(c.useState)(!1),U=Object(G.a)(P,2),R=U[0],V=U[1],W=Object(c.useState)(!1),K=Object(G.a)(W,2),J=K[0],Q=K[1],$=Object(c.useState)(!1),te=Object(G.a)($,2),ae=te[0],ce=te[1],ne=Object(c.useState)(""),re=Object(G.a)(ne,2),se=re[0],ie=re[1],oe=Object(c.useState)(!0),de=Object(G.a)(oe,2),ue=de[0],be=de[1];Object(c.useEffect)((function(){fe(),pe()}),[]);var fe=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/nodes/?level=0");case 3:t=e.sent,a=t.data,v(a.map((function(e){return{value:e.id,label:e.title}}))),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/classification/facet_category/");case 3:200===(t=e.sent).status&&(a=[],null===t||void 0===t||t.data.forEach((function(e){e.facets.forEach((function(t){var c={facetCategory:e.title,facetValue:t.label,dateCreated:Object(he.a)(Date.parse(t.created_at),"MMM-dd-yyyy")};a.push(c)}))})),w(a),E(t.data.map((function(e){return{facetCategory:e.title,facetType:e.facet_type}})))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(e){b(e.target.value),"hierarchyExport"===e.target.value?(M(""),ie("")):o("")},ve=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,n,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=4,x.get("/classification/nodes/".concat(A,"/download_facet_extract/"));case 4:200===(t=e.sent).status&&(B(!1),n=window.URL.createObjectURL(new Blob([t.data])),(r=document.createElement("a")).href=n,s=null===(c=O.find((function(e){return e.value===A})))||void 0===c?void 0:c.label,r.setAttribute("download","".concat(s,"_facets.csv")),document.body.appendChild(r),r.click(),r.remove(),X("Facet extract successful"),a({showModal:!1,showExport:!1})),202===t.status&&("True"===sessionStorage.getItem("email_verified")?(X("Facet extract will be sent to your email"),a({showModal:!1,showExport:!1})):(B(!1),ie(null===(i=t.data)||void 0===i?void 0:i.detail),be(!1))),B(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),B(!1),Q(!0),ce(z(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(!0),e.next=4,x.get("/classification/nodes/".concat(n[0].id,"/download_facet_category_extract/"));case 4:200===(t=e.sent).status&&(B(!1),c=window.URL.createObjectURL(new Blob([t.data])),(r=document.createElement("a")).href=c,r.setAttribute("download","exportWithFacetCategory.csv"),document.body.appendChild(r),r.click(),r.remove(),X("Facet exported successfully"),a({showModal:!1,showExport:!1,selectedNodes:[]})),202===t.status&&("True"===sessionStorage.getItem("email_verified")?(X("Facet extract will be sent to your email"),a({showModal:!1,showExport:!1})):(B(!1),ie(null===(s=t.data)||void 0===s?void 0:s.detail),be(!1))),B(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),B(!1),Q(!0),ce(z(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(!0),e.next=4,x.get("/server/verify-email");case 4:200===e.sent.status&&(V(!1),X("Verification Email Successfully Sent"),a({showModal:!1,showExport:!1})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),V(!1),Q(!0),ce(z(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(C.a.Header,{closeButton:!0,children:Object(Z.jsx)(C.a.Title,{children:"Export Hierarchy"})}),Object(Z.jsxs)(C.a.Body,{children:[Object(Z.jsx)("div",{className:"my-3",children:Object(Z.jsx)(q,{show:J,message:ae,hide:function(){return Q(!1)}})}),Object(Z.jsxs)("div",{className:"pb-4",children:[Object(Z.jsx)("div",{className:"form-check form-check-inline mr-4",children:Object(Z.jsxs)("label",{className:"form-check-label",children:[Object(Z.jsx)("input",{className:"form-check-input",type:"radio",value:"hierarchyExport",checked:"hierarchyExport"===h,onChange:Oe}),"Export Hierarchy"]})}),Object(Z.jsx)("div",{className:"form-check form-check-inline",children:Object(Z.jsxs)("label",{className:"form-check-label",children:[Object(Z.jsx)("input",{className:"form-check-input",type:"radio",value:"nodeWithFacet",checked:"nodeWithFacet"===h,onChange:Oe}),"Export node with facets"]})}),Object(Z.jsx)("div",{className:"form-check form-check-inline",children:Object(Z.jsxs)("label",{className:"form-check-label",children:[Object(Z.jsx)("input",{className:"form-check-input",type:"radio",value:"allFacets",checked:"allFacets"===h,onChange:Oe}),"Export all facet categories"]})}),Object(Z.jsx)("div",{className:"form-check form-check-inline",children:Object(Z.jsxs)("label",{className:"form-check-label",children:[Object(Z.jsx)("input",{className:"form-check-input",type:"radio",value:"facetType",checked:"facetType"===h,onChange:Oe}),"Export facet type"]})}),Object(Z.jsx)("div",{className:"form-check form-check-inline",children:Object(Z.jsxs)("label",{className:"form-check-label",children:[Object(Z.jsx)("input",{className:"form-check-input",type:"radio",value:"nodeAndFacet",checked:"nodeAndFacet"===h,onChange:Oe}),"Export node and facet information"]})})]}),"hierarchyExport"===h&&Object(Z.jsx)(H.a.Group,{children:Object(Z.jsxs)(H.a.Control,{as:"select",size:"md",onChange:function(e){return o(e.target.value)},children:[Object(Z.jsx)("option",{value:"",children:"Format"}),Object(Z.jsx)("option",{value:".csv",children:"CSV"}),Object(Z.jsx)("option",{value:".json",children:"JSON"})]})}),"nodeWithFacet"===h&&Object(Z.jsxs)(Z.Fragment,{children:[!ue&&Object(Z.jsx)(je.a,{variant:"primary",className:"text-center py-4",children:Object(Z.jsxs)("div",{children:[se,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),"You need to ",Object(Z.jsx)("b",{children:"verify your email"})," to receive messages. Click on the button below \ud83d\udc47 to verify",Object(Z.jsx)("div",{className:"mt-4",children:Object(Z.jsx)(S.a,{className:" centricity-btn m-auto",variant:"primary",onClick:me,children:R?Object(Z.jsx)(ee,{}):"Send Verification Email"})})]})}),Object(Z.jsx)(le.a,{onChange:function(e){M(e.value)},options:O,isLoading:!O})]}),"nodeAndFacet"===h&&Object(Z.jsx)(Z.Fragment,{children:!ue&&Object(Z.jsx)(je.a,{variant:"primary",className:"text-center py-4",children:Object(Z.jsxs)("div",{children:[se,Object(Z.jsx)("br",{}),Object(Z.jsx)("br",{}),"You need to ",Object(Z.jsx)("b",{children:"verify your email"})," to receive messages. Click on the button below \ud83d\udc47 to verify",Object(Z.jsx)("div",{className:"mt-4",children:Object(Z.jsx)(S.a,{className:" centricity-btn m-auto",variant:"primary",onClick:me,children:R?Object(Z.jsx)(ee,{}):"Send Verification Email"})})]})})})]}),Object(Z.jsxs)(C.a.Footer,{children:[Object(Z.jsx)(S.a,{className:"centricity-btn",variant:"outline-primary",onClick:function(){return a({showModal:!1,showExport:!1})},children:"Cancel"}),Object(Z.jsx)(S.a,{className:" centricity-btn",variant:"primary",disabled:""===i&&!A&&"allFacets"!==h&&"facetType"!==h&&"nodeAndFacet"!==h,onClick:function(){if("hierarchyExport"===h)".csv"===i?function(){var e=[];t.forEach((function(t){e.push({department:'"'.concat(t.title,'"'),category:"",subCategory:"",subset:"",created_at:'"'.concat(t.created_at,'"')}),t.children&&t.children.forEach((function(a){e.push({department:'"'.concat(t.title,'"'),category:'"'.concat(a.title,'"'),subCategory:"",subset:"",created_at:'"'.concat(a.created_at,'"')}),a.children&&a.children.forEach((function(c){e.push({department:'"'.concat(t.title,'"'),category:'"'.concat(a.title,'"'),subCategory:'"'.concat(c.title,'"'),subset:"",created_at:'"'.concat(c.created_at,'"')}),c.children&&c.children.forEach((function(n){e.push({department:'"'.concat(t.title,'"'),category:'"'.concat(a.title,'"'),subCategory:'"'.concat(c.title,'"'),subset:'"'.concat(n.title,'"'),created_at:'"'.concat(n.created_at,'"')})}))}))}))})),Y({department:"DEPARTMENT",category:"CATEGORY",subCategory:"SUBCATEGORY",subset:"SUBSET",created_at:"DATE CREATED (for leaf nodes)"},e,"hierarchyExport")}():".json"===i&&function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download","hierarchyData.json"),document.body.appendChild(a),a.click()}(),a({showModal:!1,showExport:!1});else if("nodeWithFacet"===h)ve();else if("allFacets"===h)Y({facetCategory:"Facet Category",facetValue:"Facet Value",dateCreated:"Date Created"},y,"facetExports");else if("facetType"===h)Y({facetCategory:"Facet Category",facetType:"Facet Type"},F,"facetType"),a({showModal:!1,showExport:!1});else if("nodeAndFacet"===h)if(n.length<1){Q(!0);ce(z({message:"Please select a node"}))}else xe()},children:I?Object(Z.jsx)(ee,{}):"Export"})]})]})},fe=(a(162),a(163),function(e){Object(h.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(j.a)(this,a);for(var c=arguments.length,n=new Array(c),r=0;r<c;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={isLoading:!1,isFetchingFacets:!1,showModal:!1,showDelete:!1,showAddFacetCategory:!1,showAddFacetValue:!1,showBulkAssign:!1,showExport:!1,refreshFacetCategory:!1,refreshFacetValue:!1,selectAll:!1,selectDepts:!1,searchString:"",searchFocusIndex:0,searchFoundCount:null,nodeClicked:null,selectedNodes:[],treeData:[]},e.componentDidMount=function(){e.fetchHierarchy()},e.fetchHierarchy=Object(u.a)(d.a.mark((function t(){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({isLoading:!0}),t.next=4,x.get("/classification/nodes/tree/");case 4:a=t.sent,c=a.data,e.setState({isLoading:!1,treeData:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.setState({isLoading:!1,errorMsg:z(t.t0),showError:!0});case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.fetchNodeFacets=function(){var t=Object(u.a)(d.a.mark((function t(a){var c,n,r,s,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a.node,n=a.parentNode,r=a.path,t.prev=1,e.setState({isFetchingFacets:!0}),t.next=5,x.get("/classification/nodes/".concat(c.id,"/facets/"));case 5:s=t.sent,i=s.data,l=e.state.treeData,e.setState({isFetchingFacets:!1,nodeFacet:i,treeData:Object(N.b)({treeData:l,path:r,getNodeKey:N.d,newNode:Object(o.a)(Object(o.a)({},c),{},{facet_properties:i})}),nodeClicked:{parentNode:n,node:Object(o.a)(Object(o.a)({},c),{},{facet_properties:i}),path:r}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.setState({isFetchingFacets:!1,errorMsg:z(t.t0),showError:!0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.hideModal=function(){e.setState({showModal:!1,showDelete:!1,showAddFacetCategory:!1,showAddFacetValue:!1})},e.handleStateUpdate=function(t){return e.setState(Object(o.a)({},t))},e.handleSearchFinishCallback=function(t){e.setState({searchFoundCount:t.length,searchFocusIndex:t.length>0?e.state.searchFocusIndex%t.length:0})},e.handleNodeOnClick=function(t,a){["rst__rowContents","rst__rowLabel","rst__rowTitle"].includes(a.target.className)&&(t.node.id?e.fetchNodeFacets(t):e.setState({nodeClicked:{parentNode:t.parentNode,node:t.node,path:t.path}}))},e.addNewDepartment=function(t){var a=t.node,c=t.path;e.setState({treeData:Object(N.a)({treeData:e.state.treeData,getNodeKey:N.d,newNode:{title:"NEW NODE",description:"",facet_properties:[],parent:null}}).treeData,node:{path:c,node:a}})},e.addNodeUnderParent=function(t){var a=t.node,c=t.path;e.setState({treeData:Object(N.a)({treeData:e.state.treeData,parentKey:c[c.length-1],expandParent:!0,getNodeKey:N.d,newNode:{title:"NEW NODE",description:"",facet_properties:[]}}).treeData,node:{path:c,node:a}})},e.deleteNodeAtPath=function(t){var a=t.node,c=t.path;if(!a.id)return e.setState({treeData:Object(N.e)({treeData:e.state.treeData,path:c,getNodeKey:N.d}),node:{}});e.setState({showModal:!0,showDelete:!0,node:{path:c,node:a}})},e.handleInputChange=function(t){var a=t.target,c=a.name,n=a.value;e.setState((function(e){return{formData:Object(o.a)(Object(o.a)({},e.formData),{},Object(i.a)({},c,n))}}))},e.handleMainCheckBoxChange=function(t){t.target.checked?e.setState({selectedNodes:W(e.state.treeData),selectAll:!0,selectDepts:!1}):e.setState({selectedNodes:[],selectAll:!1})},e.handleDeptsCheckBoxChange=function(t){t.target.checked?e.setState({selectedNodes:K(e.state.treeData),selectDepts:!0,selectAll:!1}):e.setState({selectedNodes:[],selectDepts:!1})},e.handleCheckBoxChange=function(t,a){t.target.checked?e.setState({selectedNodes:[].concat(Object(s.a)(e.state.selectedNodes),[{id:a.node.id,checked:t.target.checked}])}):e.setState({selectedNodes:e.state.selectedNodes.filter((function(e){return e.id!==a.node.id}))})},e.updateNodeOnMove=function(){var t=Object(u.a)(d.a.mark((function t(a){var c,n,r,s,i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=a.node,n=a.nextParentNode,r=c.id,s=c.title,i=c.description,o=c.facet_properties,t.prev=2,J()){t.next=5;break}throw new Error("Oops!! You do not have write access");case 5:return t.next=7,x.patch("classification/nodes/".concat(r,"/"),{title:s,description:i,facet_properties:o,parent:n?n.id:null});case 7:200===t.sent.status&&X("Node Successfully Updated"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.setState({isLoading:!1,errorMsg:z(t.t0),showError:!0});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),e.render=function(){var t=e.state,a=t.isLoading,c=t.isFetchingFacets,n=t.searchString,r=t.searchFoundCount,s=t.searchFocusIndex,i=t.treeData,o=t.showModal,l=t.showDelete,d=t.showAddFacetCategory,u=t.showAddFacetValue,j=t.selectedNodes,h=t.selectAll,b=t.selectDepts,f=t.showExport,p=t.refreshFacetCategory,O=t.refreshFacetValue,v=t.node,x=t.nodeClicked,m=t.showError,S=t.errorMsg;return Object(Z.jsxs)("div",{className:"container-fluid main-content",children:[Object(Z.jsx)(g.a,{className:"custom-notification-container"}),Object(Z.jsx)(ae,{isFetchingHierarchy:a,updateState:e.handleStateUpdate,treeData:i,searchFoundCount:r,searchFocusIndex:s,selectedNodes:j}),Object(Z.jsxs)(y.a,{children:[Object(Z.jsx)(w.a,{lg:6,md:12,children:Object(Z.jsx)("div",{className:"column-container",children:Object(Z.jsx)("div",{className:"hierarchy-wrapper",children:Object(Z.jsxs)("div",{style:{height:960},children:[Object(Z.jsx)(q,{show:m,message:S,hide:function(){return e.setState({showError:!1})}}),a?Object(Z.jsx)(ee,{size:"lg"}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{className:"select-all-container",children:[Object(Z.jsx)("input",{type:"checkbox",id:"mainCheckbox",className:"select-all-checkbox",checked:h,onChange:e.handleMainCheckBoxChange}),Object(Z.jsx)("label",{htmlFor:"mainCheckbox",children:"Select All"}),Object(Z.jsx)("input",{type:"checkbox",id:"deptsCheckbox",className:"select-depts-checkbox",checked:b,onChange:e.handleDeptsCheckBoxChange}),Object(Z.jsx)("label",{htmlFor:"deptsCheckbox",children:"Select Depts "})]}),Object(Z.jsx)(N.c,{className:"custom-sortable-tree-container",treeData:i,onChange:function(t){return e.setState({treeData:t})},searchQuery:n,searchFocusOffset:s,searchFinishCallback:e.handleSearchFinishCallback,rowHeight:55,onMoveNode:e.updateNodeOnMove,canDrop:function(e){return e.nextPath.length<5},onlyExpandSearchedNodes:!0,generateNodeProps:function(t){var a;return{onClick:function(a){e.handleNodeOnClick(t,a)},style:t.node===(null===x||void 0===x?void 0:x.node)?{borderRadius:9,border:"solid 2px #0086c6"}:null,buttons:[0===t.treeIndex&&Object(Z.jsx)("button",{onClick:function(){return e.addNewDepartment(t)},children:"Add Dept"}),t.path.length<4&&Object(Z.jsx)("button",{onClick:function(){return e.addNodeUnderParent(t)},children:"+"}),Object(Z.jsx)("button",{onClick:function(){return e.deleteNodeAtPath(t)},children:"x"}),Object(Z.jsx)("input",{type:"checkbox",id:"exampleCheck1",style:{marginRight:"14px"},checked:(null===(a=j.find((function(e){return e.id===t.node.id})))||void 0===a?void 0:a.checked)||!1,onChange:function(a){return e.handleCheckBoxChange(a,t)}})]}}})]})]})})})}),Object(Z.jsx)(w.a,{lg:6,md:12,children:Object(Z.jsx)(re,{onClickNode:x,treeData:i,updateParentState:e.handleStateUpdate,refreshFacetCategory:p,refreshFacetValue:O,fetchingFacets:c})})]}),Object(Z.jsxs)(C.a,{className:"hierarchy-modal",show:o,backdrop:"static",onHide:e.hideModal,children:[l&&Object(Z.jsx)(se,{showDelete:l,node:v,treeData:i,updateParentState:e.handleStateUpdate}),d&&Object(Z.jsx)(oe,{updateParentState:e.handleStateUpdate}),u&&Object(Z.jsx)(ue,{updateParentState:e.handleStateUpdate}),f&&Object(Z.jsx)(be,{treeData:i,updateParentState:e.handleStateUpdate,selectedNodes:j})]})]})},e}return a}(c.Component)),pe=function(){return Object(Z.jsx)(fe,{})};a(164),a(165);r.a.render(Object(Z.jsx)(pe,{}),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.250f9101.chunk.js.map